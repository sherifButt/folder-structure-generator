-- create_tables.sql

-- Create Prompts Table
CREATE TABLE prompts (
  prompt_id SERIAL PRIMARY KEY,
  prompt_text TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- Create Features Table
CREATE TABLE features (
  feature_id SERIAL PRIMARY KEY,
  feature_name TEXT NOT NULL,
  prompt_id INTEGER REFERENCES prompts (prompt_id) ON DELETE CASCADE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- Create Tasks Table
CREATE TABLE tasks (
  task_id SERIAL PRIMARY KEY,
  task_name TEXT NOT NULL,
  feature_id INTEGER REFERENCES features (feature_id) ON DELETE CASCADE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

-- Create Memory Table
CREATE TABLE memories (
  memory_id SERIAL PRIMARY KEY,
  task_id INTEGER REFERENCES tasks (task_id) ON DELETE CASCADE,
  memory_text TEXT NOT NULL,
  memory_type TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
